{% extends 'navbar.html' %}
{% load static %}

{% block style %}
<link href="{% static 'css/auth.css' %}" rel="stylesheet">
{% endblock style %}

{% block body %}

<div class="login">
    <div class="container-fluid">
        <!-- background -->
        <div class="row">
            <!-- <img src="{% static 'img/bg-demokrasi.png' %}" width="100%" alt="bg"> -->
            <div class='column bg-column'>
                <img src="{% static 'img/login-register.png' %}" alt="bg">
            </div>
            <div class='column login-col justify-content-center'>
                <div class="card-body-login">
                  <div class="container">
                    <div class="logo">
                        <img src="{% static 'img/logo-votepolicy.png' %}" width="40%" alt="">
                    </div>
                    <div class="login-item">
                      <form action="{% url 'login' %}" method="post" class="form form-login" autocomplete="off">
                        {% csrf_token %}
                        <div class="row px-3"> 
                          <label class="mb-1">
                          <h6 class="mb-0 text-sm"><b>Email</b></h6>
                          </label> 
                          {{form.email}}
                          
                        </div>
                        <div class="row px-3"> 
                          <label class="mb-1">
                                <h6 class="mb-0 text-sm"><b>Kata Sandi</b></h6>
                            </label> 
                          {{form.password}}
                        </div>
                        <div class="row px-3 mb-4">
                            <a href="#" class="ml-auto mb-0 text-sm">Lupa Kata Sandi?</a>
                        </div>
                        <div class="row mb-3 px-3"> <button type="submit" class="btn btn-red text-center">Masuk</button> </div>
                        <div class="row mb-3 px-3"> <small class="font-weight-bold">Tidak memiliki akun? <a class="a" href="{% url 'register' %}"><u class="text-center">Buat akun baru</u></a></small> </div>
                      </form>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        </div>  
      </div>  

      <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        {% if messages %}
        {% for m in messages %}
            {% if 'failed' in m.tags %}
                <script type="text/javascript">
                  Swal.fire({
                      "title": "Gagal",
                      "text": "{{m}}",
                      "icon": "error"

                  })
                  
                </script>
            {% else %}
                <script type="text/javascript">
                  Swal.fire({
                      "title": "Berhasil",
                      "text": "{{m}}",
                      "icon": "success"

                  })
                  
                </script>
                
            {% endif %}
        {% endfor %}
    {% endif %}
        
        <script>
          /* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
          //We start indexing at one because CSRF_token is considered and input field 
          */
          //Query All input fields
          var form_fields = document.getElementsByTagName('input')
          form_fields[1].placeholder='Masukkan nama Anda';
          form_fields[1].setAttribute("class","mb-4");
          form_fields[2].placeholder='Masukkan email Anda';
          form_fields[2].setAttribute("class","mb-4");
        </script>
  
{% endblock body %}
</html>